(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(15),c=t.n(r),o=(t(20),t(3)),a=t(2),u=t(4),s=t.n(u),i="/api/persons";var l={getAll:function(){return s.a.get(i).then((function(e){return e.data}))},addPerson:function(e){return s.a.post(i,e).then((function(e){return e.data})).catch((function(e){return e.response.data}))},deletePerson:function(e){return s.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.status})).catch((function(e){return e.response.data}))},updatePerson:function(e,n){return s.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.status})).catch((function(e){return e.response.data}))}},d=t(0),h=function(e){var n=e.handler,t=e.value;return Object(d.jsxs)("div",{children:["Filter shown with",Object(d.jsx)("input",{onChange:n,value:t})]})},j=function(e){var n=e.handler,t=e.value,r=e.children;return Object(d.jsxs)("div",{children:[r,": ",Object(d.jsx)("input",{onChange:n,value:t})]})},b=function(e){var n=e.formHandler,t=e.children;return Object(d.jsxs)("form",{onSubmit:n,children:[t,Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.isError,t=e.message,r=n?"error":"success";return null===t?null:Object(d.jsx)("div",{className:"".concat(r," container notification"),children:Object(d.jsx)("p",{children:t})})},O=function(e){var n=e.list,t=e.deleteHandler;return 0===n.length?Object(d.jsx)("p",{children:"There are no person added to the phonebook."}):n.map((function(e){return Object(d.jsxs)("p",{children:[e.name," ",e.number,Object(d.jsx)("button",{onClick:t,value:e.id,children:"Delete"})]},e.name)}))},p=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),u=Object(o.a)(c,2),s=u[0],i=u[1],p=Object(a.useState)(""),v=Object(o.a)(p,2),m=v[0],x=v[1],w=Object(a.useState)(""),g=Object(o.a)(w,2),k=g[0],P=g[1],C=Object(a.useState)(null),S=Object(o.a)(C,2),y=S[0],L=S[1],A=Object(a.useState)(!1),E=Object(o.a)(A,2),H=E[0],T=E[1],D=k?t.filter((function(e){return e.name.toLowerCase().includes(k.toLocaleLowerCase())})):t;Object(a.useEffect)((function(){l.getAll().then((function(e){return r(e)}))}),[]);function N(){i(""),x("")}function J(e,n){T(e),L(n),setTimeout((function(){L(null)}),5e3)}function B(){l.getAll().then((function(e){return r(e)}))}return Object(d.jsxs)("div",{children:[Object(d.jsx)(f,{isError:H,message:y}),Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(h,{handler:function(e){P(e.target.value)},value:k}),Object(d.jsx)("h2",{children:"Add new Phone"}),Object(d.jsxs)(b,{formHandler:function(e){e.preventDefault();var n,c,o,a=t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()})),u={name:s,number:m};a?(c=a.id,o=u,window.confirm("The person, ".concat(s," is already added to phonebook, replace old number with a new one?"))&&l.updatePerson(c,o).then((function(e){204===e?(B(),N()):J(!0,e.error)}))):(n=u,l.addPerson(n).then((function(e){e.name?(r(t.concat(e)),J(!1,"".concat(s," has been added to phonebook")),N()):J(1,e.error)})))},children:[Object(d.jsx)(j,{handler:function(e){i(e.target.value)},value:s,children:"Name"}),Object(d.jsx)(j,{handler:function(e){x(e.target.value)},value:m,children:"Phone"})]}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(O,{list:D,deleteHandler:function(e){window.confirm("Do you want to delete this person from the phonebook?")&&l.deletePerson(e.target.value).then((function(e){204===e&&(B(),J(!1,"The person's account has been deleted successfully"))})).catch((function(e){J(1,e.response.data)}))}})]})};c.a.render(Object(d.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.56533b68.chunk.js.map